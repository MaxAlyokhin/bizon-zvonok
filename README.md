## Интеграция сервисов Bizon365 и Zvonok

### Установка и запуск:

```bash
$ npm install
$ node index
```

### Как это работает:

В config.json необходимо заполнить настройки:

```json
{
  "bizonToken": "Токен для Бизона",
  "zvonokAPIKey": "API ключ для Zvonok",
  "outputFromBizon": true,
  "accountsInBizon": {
    "Аккаунт в Бизоне 1": {
      "bizonToken": "Токен для Бизона",
      "tasks": {
        "task1": {
          "ids": ["id Бизона", "id Бизона"],
          "compaign": "Номер компании в Zvonok"
        },
        "task2": {
          "ids": ["id Бизона", "id Бизона"],
          "compaign": "Номер компании в Zvonok"
        }
      }
    },
    "Аккаунт в Бизоне 2": {
      "bizonToken": "Токен для Бизона",
      "tasks": {
        "task1": {
          "ids": ["id Бизона"],
          "compaign": "Номер компании в Zvonok"
        }
      }
    }
  }
}
```

Каждая задача — это отдельная связка набора лендингов с конкретной компанией в сервисе Zvonok.

Скрипт собирает все номера телефонов со всех перечисленных в рамках задачи лендингов из Бизона и отправляет их в Zvonok на конкретную компанию, где по этим номерам будет произведён обзвон.

В папку /output записываются ответы от Бизона. Если в этом нет необходимости, то поле `outputFromBizon` нужно установить в значение `false`.

По-умолчанию скрипт собирает все номера телефонов, поступивших в систему Бизона за предыдущие сутки. Это можно изменить в файле /modules/allPhonesFromBizon.js:

```js
// Вчерашняя дата
let yesterday = new Date(new Date().setDate(new Date().getDate() - 1))
```

Этот скрипт, например, можно поставить в качестве cron-задачи на ежедневное исполнение, обзванивая, таким образом, всех новых пользователей за предыдущие сутки.
